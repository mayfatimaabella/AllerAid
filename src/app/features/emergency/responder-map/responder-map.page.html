<ion-header>
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-button (click)="goBack()">
        <ion-icon slot="icon-only" name="arrow-back"></ion-icon>
      </ion-button>
    </ion-buttons>
    <ion-title>Help is on the way</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content>
  <div class="map-container">
    <!-- Leaflet Maps -->
    <div #map id="map" *ngIf="mapAvailable" style="height: 400px; width: 100%;"></div>
    
    <!-- Fallback when map is not available -->
    <div class="map-fallback" *ngIf="!mapAvailable">
      <ion-icon name="map-outline" size="large" color="medium"></ion-icon>
      <h3>Map view unavailable</h3>
      <p>{{ responderName }} is on their way to your location</p>
      <p><em>Unable to load map. Please check your internet connection.</em></p>
    </div>
    
    <div class="responder-info-card">
      <div class="responder-header">
        <h2>{{ responderName }} is responding</h2>
        <ion-icon name="navigate-circle-outline"></ion-icon>
      </div>
      
      <div class="responder-details" *ngIf="estimatedArrivalTime">
        <div class="detail-item">
          <ion-icon name="time-outline"></ion-icon>
          <span>ETA: {{ estimatedArrivalTime }}</span>
        </div>
        <div class="detail-item">
          <ion-icon name="location-outline"></ion-icon>
          <span>Distance: {{ responderDistance }}</span>
        </div>
      </div>
      
      <div class="responder-message" *ngIf="!estimatedArrivalTime">
        <ion-spinner name="dots"></ion-spinner>
        <p>Calculating arrival time...</p>
      </div>
    </div>
  </div>
</ion-content>
