<ion-modal 
  #modal
  [isOpen]="isOpen"
  [swipeToClose]="true"
  [breakpoints]="[0, 0.5, 1]"
  [initialBreakpoint]="0.9"
  [handleBehavior]="'cycle'"
  (ionModalDidDismiss)="onDismiss()">
  
  <ng-template>
    <ion-header collapse="condense">
      <ion-toolbar>
        <div class="modal-drag-handle"></div>
      </ion-toolbar>
    </ion-header>

    <ion-content [fullscreen]="true">
      <ion-header collapse="condense">
        <ion-toolbar>
          <ion-title size="large">Recent Scans</ion-title>
        </ion-toolbar>
      </ion-header>

      <div class="scans-container ion-padding">
        <ion-list *ngIf="recentScans.length > 0">
          <ion-item 
            *ngFor="let scan of recentScans" 
            button 
            detail="true"
            (click)="onScanSelected(scan)"
            class="scan-item">
            
            <ion-thumbnail slot="start">
              <img [src]="scan.image_url || 'assets/img/placeholder.png'" alt="Product Image">
            </ion-thumbnail>

            <ion-label>
              <h2>{{ scan.product_name }}</h2>
              <p>{{ scan.brand }}</p>
              <small>{{ scan.date | date:'short' }}</small>
            </ion-label>

            <ion-badge [color]="scan.status === 'safe' ? 'success' : 'danger'" slot="end">
              {{ scan.status | uppercase }}
            </ion-badge>
          </ion-item>
        </ion-list>

        <div *ngIf="recentScans.length === 0" class="empty-state">
          <ion-icon name="time-outline"></ion-icon>
          <p>No recent scans yet</p>
        </div>
      </div>
    </ion-content>
  </ng-template>
</ion-modal>
