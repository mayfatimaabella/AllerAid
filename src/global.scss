/*
 * App Global CSS
 * ----------------------------------------------------------------------------
 * Put style rules here that you want to apply globally. These styles are for
 * the entire app and not just one component. Additionally, this file can be
 * used as an entry point to import other CSS/Sass files to be included in the
 * output CSS.
 * For more information on global stylesheets, visit the documentation:
 * https://ionicframework.com/docs/layout/global-stylesheets
 */

/* Core CSS required for Ionic components to work properly */
@import "@ionic/angular/css/core.css";

/* Basic CSS for apps built with Ionic */
@import "@ionic/angular/css/normalize.css";
@import "@ionic/angular/css/structure.css";
@import "@ionic/angular/css/typography.css";
@import "@ionic/angular/css/display.css";

/* Optional CSS utils that can be commented out */
@import "@ionic/angular/css/padding.css";
@import "@ionic/angular/css/float-elements.css";
@import "@ionic/angular/css/text-alignment.css";
@import "@ionic/angular/css/text-transformation.css";
@import "@ionic/angular/css/flex-utils.css";

/**
 * Ionic Dark Mode
 * -----------------------------------------------------
 * For more info, please see:
 * https://ionicframework.com/docs/theming/dark-mode
 */

/* @import "@ionic/angular/css/palettes/dark.always.css"; */
/* @import "@ionic/angular/css/palettes/dark.class.css"; */
@import "@ionic/angular/css/palettes/dark.system.css";

// For the alert interface (used by ion-select on mobile)
ion-alert .alert-wrapper,
ion-alert .alert-radio-group,
ion-alert .alert-checkbox-group {
  --background: #e8f2f0 !important;
  background: #e8f2f0 !important;
}
ion-alert .alert-radio-label,
ion-alert .alert-checkbox-label {
  color: #036a5d !important;
}

// Allergen Alert Styles
.alert-success .alert-wrapper {
  --background: #d4edda !important;
  border-left: 4px solid #28a745 !important;
}

.alert-success .alert-head {
  color: #155724 !important;
}

.alert-success .alert-message {
  color: #155724 !important;
}

.alert-warning .alert-wrapper {
  --background: #fff3cd !important;
  border-left: 4px solid #ffc107 !important;
}

.alert-warning .alert-head {
  color: #856404 !important;
}

.alert-warning .alert-message {
  color: #856404 !important;
}

.alert-danger .alert-wrapper {
  --background: #f5f5f5 !important;
  border-left: 4px solid #dc3545 !important;
}

.alert-danger .alert-head {
  color: #721c24 !important;
  font-weight: bold !important;
}

.alert-danger .alert-message {
  color: #721c24 !important;
  font-weight: 500 !important;
}

/* Buddy Response Alert Modal Styles */
.buddy-alert-modal {
  --width: 90%;
  --max-width: 400px;
  --height: auto;
  --border-radius: 16px;
  --box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
}

.buddy-alert-modal .modal-wrapper {
  border-radius: 16px;
  overflow: hidden;
}

/* Route Map Modal Styles */
.route-map-modal {
  --width: 95%;
  --max-width: 600px;
  --height: 80%;
  --border-radius: 12px;
  --box-shadow: 0 8px 25px rgba(0, 0, 0, 0.25);
}

.route-map-modal .modal-wrapper {
  border-radius: 12px;
  overflow: hidden;
}

/* Accessibility enhancements */
@media (prefers-reduced-motion: reduce) {
  .buddy-alert-modal,
  .route-map-modal {
    --animation: none;
  }
}

/* High contrast mode support */
@media (prefers-contrast: high) {
  .buddy-alert-modal,
  .route-map-modal {
    --box-shadow: 0 0 0 2px var(--ion-color-primary);
  }
}

/* (reverted custom popover styles) */

/* =====================================================================
   UNIVERSAL PURE WHITE MODAL OVERRIDE
   Apply cssClass="force-white-modal" (and optionally force-white-content) to
   any <ion-modal> to guarantee a white background regardless of theme/dark mode
   or component-level variable leakage. This operates at global level so it
   penetrates Ionic shadow DOM boundaries via ::part + high specificity.
   ===================================================================== */
ion-modal.force-white-modal,
ion-modal.force-white-modal::part(content),
ion-modal.force-white-modal .modal-wrapper,
ion-modal.force-white-modal .ion-page,
ion-modal.force-white-modal ion-content,
ion-modal.force-white-modal ion-content::part(scroll),
ion-modal.force-white-modal .inner-scroll {
  --background: #ffffff !important;
  --ion-background-color: #ffffff !important;
  background: #ffffff !important;
  color: #1f2d29 !important;
}

/* Toolbar is NOT forced to white - it should use teal-modal-toolbar class */
/* Teal toolbar styling for modals (works with or without force-white-modal) */
ion-modal ion-toolbar.teal-modal-toolbar,
ion-modal .teal-modal-toolbar,
.teal-modal-toolbar {
  --background: #036a5d !important;
  background: #036a5d !important;
  --color: #ffffff !important;
  color: #ffffff !important;
  border-bottom: 1px solid #004d42;
}

ion-modal ion-toolbar.teal-modal-toolbar ion-title,
ion-modal .teal-modal-toolbar ion-title,
.teal-modal-toolbar ion-title {
  color: #ffffff !important;
  font-weight: 700;
}

ion-modal ion-toolbar.teal-modal-toolbar ion-button,
ion-modal .teal-modal-toolbar ion-button,
.teal-modal-toolbar ion-button,
ion-modal ion-toolbar.teal-modal-toolbar ion-icon,
ion-modal .teal-modal-toolbar ion-icon,
.teal-modal-toolbar ion-icon {
  --color: #ffffff !important;
  color: #ffffff !important;
}

ion-modal.force-white-modal ion-item,
ion-modal.force-white-modal ion-item::part(native),
ion-modal.force-white-modal ion-item::part(container) {
  --background: #ffffff !important;
  background: #ffffff !important;
  --color: #1f2d29 !important;
  color: #1f2d29 !important;
}

ion-modal.force-white-modal ion-label[position="stacked"] {
  color: #045146 !important;
  font-weight: 600;
  letter-spacing: .3px;
}

ion-modal.force-white-modal ion-input,
ion-modal.force-white-modal ion-textarea,
ion-modal.force-white-modal ion-textarea::part(native) {
  --color: #1f2d29 !important;
  color: #1f2d29 !important;
  background: #ffffff !important;
}

ion-modal.force-white-modal ion-button {
  --background: #036a5d !important;
  background: #036a5d !important;
  --color: #ffffff !important;
  color: #ffffff !important;
  font-weight: 600;
  border-radius: 14px;
}

/* Enhanced styling for Edit Emergency Message fields */
ion-modal.force-white-modal ion-item.eem-field {
  --background: #ffffff !important;
  background: #ffffff !important;
  border: 1px solid #e8f2f0;
  border-radius: 12px;
  margin-bottom: 18px;
  box-shadow: 0 2px 6px rgba(0,0,0,0.06);
  --inner-padding-start: 16px;
  --inner-padding-end: 16px;
  --inner-padding-top: 14px;
  --inner-padding-bottom: 14px;
  min-height: 70px;
}

ion-modal.force-white-modal ion-item.eem-field ion-label[position="stacked"] {
  color: #036a5d !important;
  font-weight: 600;
  font-size: 12px;
  letter-spacing: 0.5px;
  text-transform: uppercase;
  margin-bottom: 8px;
}

ion-modal.force-white-modal ion-item.eem-field ion-input,
ion-modal.force-white-modal ion-item.eem-field ion-textarea {
  --color: #1f4a42 !important;
  color: #1f4a42 !important;
  background: #ffffff !important;
  font-size: 15px;
  font-weight: 400;
  --padding-top: 4px;
  --padding-bottom: 4px;
}

ion-modal.force-white-modal ion-item.eem-field ion-textarea::part(native) {
  --color: #1f4a42 !important;
  color: #1f4a42 !important;
  background: #ffffff !important;
  min-height: 60px;
}

/* Read-only field styling */
ion-modal.force-white-modal ion-item.eem-field ion-input[readonly] {
  opacity: 0.8;
  font-style: italic;
  color: #666 !important;
}

/* Remove unintended dark overlays from backdrop-derived variables */
ion-modal.force-white-modal::part(backdrop) {
  --backdrop-opacity: 0.32;
}

/* Reusable teal toolbar for white modals */
.teal-modal-toolbar, ion-toolbar.teal-modal-toolbar {
  --background: #036a5d !important;
  background: #036a5d !important;
  --color: #ffffff !important;
  color: #ffffff !important;
  border-bottom: 1px solid #004d42;
  width: 100%;
}
.teal-modal-toolbar ion-title { color:#ffffff !important; font-weight:700; letter-spacing:.4px; }
.teal-modal-toolbar ion-button, .teal-modal-toolbar ion-icon { --color:#ffffff !important; color:#ffffff !important; }

/* Modal styling for better display */
ion-modal {
  --height: 100%;
  --width: 100%;
  --border-radius: 0;
  
  &.force-white-modal {
    --background: #ffffff;
    --width: 100%;
    --height: 100%;
  }
}